/*! Selectric ÏŸ v1.9.3 (2016-01-14) - git.io/tjl9sQ - Copyright (c) 2016 Leonardo Santos - Dual licensed: MIT/GPL */
!function(e){"use strict";var t="selectric",o="Input Items Open Disabled TempShow HideSelect Wrapper Hover Responsive Above Scroll Group GroupLabel",s=".sl",i={onChange:function(t){e(t).change()},maxHeight:300,keySearchTimeout:500,arrowButtonMarkup:'<b class="button">&#x25be;</b>',disableOnMobile:!0,openOnHover:!1,hoverIntentTimeout:500,expandToItemText:!1,responsive:!1,preventWindowScroll:!0,inheritOriginalWidth:!1,allowWrap:!0,customClass:{prefix:t,camelCase:!1,overwrite:!0},optionsItemBuilder:"{text}",labelBuilder:"{text}"},n={add:function(e,t,o){this[e]||(this[e]={}),this[e][t]=o},remove:function(e,t){delete this[e][t]}},a={replaceDiacritics:function(e){for(var t="40-46 50-53 54-57 62-70 71-74 61 47 77".replace(/\d+/g,"\\3$&").split(" "),o=t.length;o--;)e=e.toLowerCase().replace(RegExp("["+t[o]+"]","g"),"aeiouncy".charAt(o));return e},format:function(e){var t=arguments;return(""+e).replace(/{(\d+|(\w+))}/g,function(e,o,s){return s&&t[1]?t[1][s]:t[o]})},nextEnabledItem:function(e,t){for(;e[t=(t+1)%e.length].disabled;);return t},previousEnabledItem:function(e,t){for(;e[t=(t>0?t:e.length)-1].disabled;);return t},toDash:function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},triggerCallback:function(o,s){var i=s.element,l=s.options["on"+o];e.isFunction(l)&&l.call(i,i,s),n[o]&&e.each(n[o],function(){this.call(i,i,s)}),e(i).trigger(t+"-"+a.toDash(o),s)}},l=e(document),r=e(window),c=function(n,c){function d(t){if(j.options=e.extend(!0,{},i,j.options,t),j.classes={},j.element=n,a.triggerCallback("BeforeInit",j),j.options.disableOnMobile&&Y)return void(j.disableOnMobile=!0);C(!0);var s=j.options.customClass,l=o.split(" "),r=F.width();e.each(l,function(e,t){var o=s.prefix+"-"+t;j.classes[t.toLowerCase()]=s.camelCase?o:a.toDash(o)}),x=e("<input/>",{"class":j.classes.input,readonly:Y}),k=e("<div/>",{"class":j.classes.items,tabindex:-1}),T=e("<div/>",{"class":j.classes.scroll}),D=e("<div/>",{"class":s.prefix,html:j.options.arrowButtonMarkup}),I=e('<p class="label"/>'),O=F.wrap("<div>").parent().append(D.prepend(I),k,x),A={open:m,close:g,destroy:C,refresh:u,init:d},F.on(A).wrap('<div class="'+j.classes.hideselect+'">'),e.extend(j,A),$=j.options.labelBuilder,j.options.inheritOriginalWidth&&r>0&&O.width(r),p()}function p(){j.items=[];var t=F.children(),o="<ul>",i=F.find("option"),n=i.index(i.filter(":selected")),l=0;S=H=~n?n:0,(E=t.length)&&(t.each(function(){function t(){var t=e(this),s=t.html(),i=t.prop("disabled"),n=j.options.optionsItemBuilder;j.items[l]={element:t,value:t.val(),text:s,slug:a.replaceDiacritics(s),disabled:i},o+=a.format('<li data-index="{1}" class="{2}">{3}</li>',l,e.trim([l==S?"selected":"",l==E-1?"last":"",i?"disabled":""].join(" ")),e.isFunction(n)?n(j.items[l],t,l):a.format(n,j.items[l])),l++}var s=e(this);if(s.is("optgroup")){var i=s.prop("disabled"),n=s.children();o+=a.format('<ul class="{1}"><li class="{2}">{3}</li>',e.trim([j.classes.group,i?"disabled":"",s.prop("class")].join(" ")),j.classes.grouplabel,s.prop("label")),i&&n.prop("disabled",!0),n.each(t),o+="</ul>"}else t.call(s)}),k.append(T.html(o+"</ul>")),I.html(e.isFunction($)?$(j.items[S]):a.format($,j.items[S]))),D.add(F).add(O).add(x).off(s),O.prop("class",[j.classes.wrapper,j.options.customClass.overwrite?F.prop("class").replace(/\S+/g,j.options.customClass.prefix+"-$&"):F.prop("class"),j.options.responsive?j.classes.responsive:""].join(" ")),F.prop("disabled")?(O.addClass(j.classes.disabled),x.prop("disabled",!0)):(R=!0,O.removeClass(j.classes.disabled).on("mouseenter"+s,function(t){e(this).addClass(j.classes.hover),j.options.openOnHover&&(clearTimeout(j.closeTimer),m())}).on("mouseleave"+s,function(t){e(this).removeClass(j.classes.hover),j.options.openOnHover&&(clearTimeout(j.closeTimer),j.closeTimer=setTimeout(g,j.options.hoverIntentTimeout))}),D.on("click"+s,function(e){L?g():m(e)}),x.prop({tabindex:P,disabled:!1}).on("keypress"+s,h).on("keydown"+s,function(e){h(e),clearTimeout(j.resetStr),j.resetStr=setTimeout(function(){x.val("")},j.options.keySearchTimeout);var t=e.keyCode||e.which;if(t>36&&41>t){if(!j.options.allowWrap&&(39>t&&0==H||t>38&&H+1==j.items.length))return;b(a[(39>t?"previous":"next")+"EnabledItem"](j.items,H))}}).on("focusin"+s,function(e){x.one("blur",function(){x.blur()}),L||m(e)}).on("oninput"in x[0]?"input":"keyup",function(){x.val().length&&e.each(j.items,function(e,t){return RegExp("^"+x.val(),"i").test(t.slug)&&!t.disabled?(b(e),!1):void 0})}),F.prop("tabindex",!1),y=e("li",k.removeAttr("style")).on({mousedown:function(e){e.preventDefault(),e.stopPropagation()},click:function(){return b(e(this).data("index"),!0),!1}}).filter("[data-index]")),a.triggerCallback("Init",j)}function u(){a.triggerCallback("Refresh",j),p()}function h(e){var t=e.keyCode||e.which;13==t&&e.preventDefault(),/^(9|13|27)$/.test(t)&&(e.stopPropagation(),b(H,!0))}function f(){var e=k.closest(":visible").children(":hidden").addClass(j.classes.tempshow),t=j.options.maxHeight,o=k.outerWidth(),s=D.outerWidth()-(o-k.width());!j.options.expandToItemText||s>o?M=s:(k.css("overflow","scroll"),O.width(9e4),M=k.width(),k.css("overflow",""),O.width("")),k.width(M).height()>t&&k.height(t),e.removeClass(j.classes.tempshow)}function m(o){a.triggerCallback("BeforeOpen",j),o&&(o.preventDefault(),o.stopPropagation()),R&&(f(),e("."+j.classes.hideselect,"."+j.classes.open).children()[t]("close"),L=!0,B=k.outerHeight(),W=k.height(),O.addClass(j.classes.open),x.val("").is(":focus")||x.focus(),l.on("click"+s,g).on("scroll"+s,v),v(),j.options.preventWindowScroll&&l.on("mousewheel"+s+" DOMMouseScroll"+s,"."+j.classes.scroll,function(t){var o=t.originalEvent,s=e(this).scrollTop(),i=0;"detail"in o&&(i=-1*o.detail),"wheelDelta"in o&&(i=o.wheelDelta),"wheelDeltaY"in o&&(i=o.wheelDeltaY),"deltaY"in o&&(i=-1*o.deltaY),(s==this.scrollHeight-W&&0>i||0==s&&i>0)&&t.preventDefault()}),w(H),a.triggerCallback("Open",j))}function v(){O.toggleClass(j.classes.above,B<=O.offset().top&&O.offset().top+O.outerHeight()+B>r.scrollTop()+r.height())}function g(){if(a.triggerCallback("BeforeClose",j),S!=H){a.triggerCallback("BeforeChange",j);var t=j.items[H].text;F.prop("selectedIndex",S=H).data("value",t),I.html(e.isFunction($)?$(j.items[H]):a.format($,j.items[H])),a.triggerCallback("Change",j)}l.off(s),O.removeClass(j.classes.open),L=!1,a.triggerCallback("Close",j)}function b(e,t){void 0!=e&&(j.items[e].disabled||(y.removeClass("selected").eq(H=e).addClass("selected"),w(e),t&&g()))}function w(e){var t=y.eq(e).outerHeight(),o=y[e].offsetTop,s=T.scrollTop(),i=o+2*t;T.scrollTop(i>s+B?i-B:s>o-t?o-t:s)}function C(e){R&&(k.add(D).add(x).remove(),!e&&F.removeData(t).removeData("value"),F.prop("tabindex",P).off(s).off(A).unwrap().unwrap(),R=!1)}var x,k,T,D,I,O,y,H,S,B,W,M,E,A,$,j=this,F=e(n),L=!1,R=!1,Y=/android|ip(hone|od|ad)/i.test(navigator.userAgent),P=F.prop("tabindex");d(c)};e.fn[t]=function(o){return this.each(function(){var s=e.data(this,t);s&&!s.disableOnMobile?""+o===o&&s[o]?s[o]():s.init(o):e.data(this,t,new c(this,o))})},e.fn[t].hooks=n}(jQuery);